<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>Projet Euler - Numéros pairs de Fibonacci</title>
<style>
pre code{display:block;overflow:auto;background-color:#011627}code{font-family:Menlo, Roboto Mono, Courier New, monospace;color:#D6DEEB;font-size:16px;background-color:#011627;border:1px solid #373b41;box-shadow:2px 4px 25px rgba(0, 0, 0, .15);border-radius:4px;padding:2px 4px}blockquote{border-left:0.3rem solid #eaeaea;margin-left:0;margin-right:0;font-style:italic;padding:1.5rem}blockquote span{display:block;font-style:normal;font-weight:bold;margin-top:1em}a{color:#81a2be;text-decoration:none}body{max-width:50em;padding-bottom:3em;margin:2em auto;font-family:'Lato', Arial, sans-serif;font-size:20px;color:#c5c8c6;line-height:1.5em;background-color: #1d1f21;}nav ol,nav ul{margin:0;padding:0;list-style:none}img{max-width:50em}h1{font-weight:bold;font-size:2em;margin-bottom:0.3em;padding-bottom:0.3em}p{margin-top:0.3em;padding:0;text-align:justify}
</style>
<link rel="stylesheet" href="../../highlight/styles/github.min.css">
</head>
<body class="article">
<div id="header">
<h1>Projet Euler - Numéros pairs de Fibonacci</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_15_octobre_2019">15 Octobre 2019</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
Each new term in the Fibonacci sequence is generated by adding the previous two terms.
By starting with 1 and 2, the first 10 terms will be: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89&#8230;&#8203;
By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">fun main() {
    val fibonacci = generateSequence(1 to 1) { it.second to it.first + it.second }
        .map { it.first }

    fibonacci.takeWhile { it &lt;= 4_000_000 }
        .filter { it.isEven }
        .sum()
        .also { println(it) }
    }

private val Int.isEven: Boolean
    inline get() = this % 2 == 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous devez trouver des multiples de 2 dans la <a href="https://en.wikipedia.org/wiki/Fibonacci_number">suite de Fibonacci</a>.
Dans cette suite, chaque nombre est la somme des deux précédents.
Les valeurs de la séquence ne doivent pas dépasser quatre millions.</p>
</div>
<div class="paragraph">
<p>Kotlin nous permet d&#8217;utiliser une <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/-sequence/index.html">Sequence</a>.
Une <code>Sequence</code> est une collection évaluée en différé. L&#8217;<a href="https://en.wikipedia.org/wiki/Lazy_initialization">initialisation différée</a> signifie que la création d&#8217;objet est différée jusqu&#8217;à sa première utilisation.
Cette technique est utile si vous souhaitez améliorer les performances, éviter le gaspillage de calculs et réduire les besoins en mémoire du programme.</p>
</div>
<div class="paragraph">
<p>La méthode <code>generateSequence</code> prend deux paramètres.
Le premier est une graine.
Il s&#8217;agit de la valeur de départ de la séquence.
Dans notre exemple, nous avons commencé avec deux 1. En effet, nous avons défini une <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html">Pair</a> qui prend deux <code>Int</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">val pair: Pair&lt;Int, Int&gt; = 1 to 1 // équivalent de Pair(1, 1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le deuxième argument est une fonction appelée pour calculer la valeur suivante en fonction de la précédente, à chaque itération.
Dans notre cas, nous devons créer une autre paire à l&#8217;aide de notre graine.
Donc, nous avons une nouvelle paire avec la dernière valeur et la somme des deux valeurs dans la paire précédente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">// Pair(1, 1) puis Pair(1, 2) puis Pair(2, 3) puis Pair(3, 5), ...
val newPair = it.second to it.first + it.second</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, nous mappons sur la première valeur d&#8217;une paire et nous avons une séquence avec seulement des entiers, et donc, plus de paires.
C&#8217;est notre séquence de Fibonacci.</p>
</div>
<div class="paragraph">
<p>La méthode <code>takeWhile</code> nous permet de donner un prédicat à la <code>Sequence</code>.
Avec cela, nous pouvons vérifier que les valeurs ne dépassent pas quatre millions.
Une autre vérification est demandée : vérifiez si le nombre est pair.
Pour cela, nous utilisons une propriété inline comme dans le premier problème.</p>
</div>
<div class="paragraph">
<p>La méthode <code>sum</code> est une méthode terminée car elle ne renvoie pas de <code>Sequence</code>.
Lorsque cette méthode est déclenchée, le programme va initialiser notre collection paresseuse.</p>
</div>
</div>
</div>
</div>
<script src="../../highlight/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>